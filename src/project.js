window.__require=function t(e,o,n){function i(c,r){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var d=o[c]={exports:{}};e[c][0].call(d.exports,function(t){return i(e[c][1][t]||t)},d,d.exports,t,e,o,n)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({control:[function(t,e,o){"use strict";cc._RF.push(e,"70903ovvA9A6pfxlJyEmYXW","control"),cc.Class({extends:cc.Component,properties:{snake:{default:null,type:cc.Node},maxSpeed:5},onLoad:function(){this.control=this.node.children[0],this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this),this.dir=cc.v2(0,0)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchcancel",this.onTouchCancel,this)},onTouchStart:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.control.setPosition(e)},onTouchMove:function(t){var e=t.getDelta();this.control.setPosition(this.control.position.add(e));var o=this.control.position.normalize();this.snake.getComponent("snake").dir=o},onTouchEnd:function(t){this.control.setPosition(cc.v2(0,0))},onTouchCancel:function(t){this.control.setPosition(cc.v2(0,0))},start:function(){},update:function(t){var e=this.control.position.mag()/(this.node.width/2);e>1&&this.control.setPosition(this.control.position.div(e));var o=this.dir.mul(this.maxSpeed*e);this.snake.setPosition(this.snake.position.add(o)),this.snake.x>this.snake.parent.width/2?this.snake.x=this.snake.parent.width/2:this.snake.x<-this.snake.parent.width/2&&(this.snake.x=-this.snake.parent.width/2),this.snake.y>this.snake.parent.height/2?this.snake.y=this.snake.parent.height/2:this.snake.y<-this.snake.parent.height/2&&(this.snake.y=-this.snake.parent.height/2)}}),cc._RF.pop()},{}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"ede32oJvwZCsbNhTvVQC+Ts","enemy"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},update:function(t){this.node.y=this.node.y-2.5,this.node.y<=-780&&game.onEnemyKilled(this.node)}}),cc._RF.pop()},{}],food:[function(t,e,o){"use strict";cc._RF.push(e,"b7d66I5PrRN36aa4C58IsnX","food"),cc.Class({extends:cc.Component,properties:{score:{default:0,type:cc.Integer,tooltip:"\u83b7\u5f97\u7684\u5206\u6570"},HP:{default:0,type:cc.Integer,tooltip:"\u8840\u91cf"},foodm:{default:null,type:cc.AudioClip}},onLoad:function(){},start:function(){},onCollisionEnter:function(t,e){if(0==t.tag&&0===this.HP){this.HP--;var o=this.getComponent(cc.Animation);return o.play("fdie"),o.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.foodm,!1),void(this.HP<0&&game.gainScore(this.score))}},onFinished:function(){this.node.destroy()},update:function(t){this.node.y=this.node.y-5,this.node.y<=-790&&game.onFoodKilled(this.node)}}),cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"fd6aaH0H2ZIWaWQIDe3vq6f","game"),cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,food:cc.Prefab,enemy:cc.Prefab,scoreDisplay:cc.Label,bgm:{default:null,type:cc.AudioClip}},onLoad:function(){window.game=this,this.isBgMove=!1,this.bg1.y=0,this.bg2.y=this.bg1.y+this.bg1.height,this.foodTime=0,this.foodPool=new cc.NodePool,this.enemyTime=0,this.enemyPool=new cc.NodePool,this.score=0,this.scoreDisplay.string=this.score,this.current=cc.audioEngine.play(this.bgm,!0,.3)},setBg:function(){this.bg1.y=this.bg1.y-1,this.bg2.y=this.bg2.y-1,this.bg1.y<=-this.bg1.height&&(this.bg1.y=this.bg2.y+this.bg1.height),this.bg2.y<=-this.bg1.height&&(this.bg2.y=this.bg1.y+this.bg1.height)},getFoodPosition:function(){var t,e=this.node.y+Math.random()*this.node.height/1.5,o=this.node.width;return t=(Math.random()-.5)*o,cc.v2(t,e)},createFood:function(){var t=null;(t=this.foodPool.size()>0?this.foodPool.get():cc.instantiate(this.food)).parent=this.node;var e=this.getFoodPosition();t.setPosition(e)},onFoodKilled:function(t){this.foodPool.put(t)},removeAllFood:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--){t[e].getComponent("food")&&this.onFoodKilled(t[e])}},getEnemyPosition:function(){var t,e=this.node.y+Math.random()*this.node.height/1.5,o=this.node.width;return t=(Math.random()-.5)*o,cc.v2(t,e)},createEnemy:function(){var t=null;(t=this.enemyPool.size()>0?this.enemyPool.get():cc.instantiate(this.enemy)).parent=this.node;var e=this.getEnemyPosition();t.setPosition(e)},onEnemyKilled:function(t){this.enemyPool.put(t)},removeAllEnemy:function(){for(var t=this.node.children,e=t.length-1;e>=0;e--){t[e].getComponent("enemy")&&this.onEnemyKilled(t[e])}},start:function(){cc.director.getCollisionManager().enabled=!0},gainScore:function(t){this.score+=t,this.scoreDisplay.string=this.score.toString()},getScore:function(){return parseInt(this.scoreDisplay.string)},updateScore:function(){var t=this.scoreDisplay.string,e={score:t},o=cc.sys.localStorage.getItem("score"),n=cc.sys.localStorage.getItem("topScore");(!n||parseInt(n)<parseInt(t))&&cc.sys.localStorage.setItem("topScore",t),o?((o=JSON.parse(o))instanceof Array||(o=[]),o.unshift(e)):(o=[]).unshift(e),cc.sys.localStorage.setItem("currentScore",t),cc.sys.localStorage.setItem("score",JSON.stringify(o))},gameOver:function(){this.updateScore(),cc.director.loadScene("over"),cc.audioEngine.stop(this.current)},update:function(t){this.setBg(),this.enemyTime++,75==this.enemyTime&&(this.enemyTime=0,this.createEnemy()),this.foodTime++,720==this.foodTime&&(this.foodTime=0,this.createFood())}}),cc._RF.pop()},{}],over:[function(t,e,o){"use strict";cc._RF.push(e,"9fce8hOFpFG5p9kVKvsLMTC","over"),cc.Class({extends:cc.Component,properties:{currentScore:cc.Label,topScore:cc.Label},onLoad:function(){var t=cc.sys.localStorage.getItem("topScore");this.topScore.string=t;var e=cc.sys.localStorage.getItem("currentScore");this.currentScore.string=e,this.passiveShare()},clickBtn:function(t,e){if("home"==e)cc.director.loadScene("ready");else if("again"==e)cc.director.loadScene("play");else if("share"==e){if("undefined"==typeof wx)return;var o=cc.sys.localStorage.getItem("currentScore");wx.shareAppMessage({title:"\u7231\u5fc3\u8d2a\u5403\u86c7, \u8fd9\u6b21\u6211\u83b7\u5f97\u4e86"+o+"\u5206",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})})}else if("guang2"==e){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}},passiveShare:function(){if("undefined"!=typeof wx){wx.showShareMenu({success:function(t){console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u6210\u529f\uff01")},fail:function(t){console.log(t),console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u5931\u8d25\uff01")}});var t=cc.sys.localStorage.getItem("currentScore");wx.onShareAppMessage(function(){return{title:"\u7231\u5fc3\u8d2a\u5403\u86c7, \u8fd9\u6b21\u6211\u83b7\u5f97\u4e86"+t+"\u5206",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})}})}},update:function(t){}}),cc._RF.pop()},{}],snake:[function(t,e,o){"use strict";cc._RF.push(e,"cb615gsvhdBUaA6VOBCConO","snake"),cc.Class({extends:cc.Component,properties:{body:{default:null,type:cc.Prefab},bodyNum:2,sectionLen:24,time:6,snakem:{default:null,type:cc.AudioClip}},onLoad:function(){this.snakeArray=[],this.snakeArray.push(this.node),this.node.setPosition(cc.v2(0,1)),this.rotateHead(this.node.position),this.speed=this.sectionLen/this.time,this.pointsArray=[];for(var t=1;t<=this.bodyNum;t++)this.getNewBody();this.dir=null,this.headPointsNum=0},getNewBody:function(){var t=cc.instantiate(this.body);if(this.snakeArray.length>this.bodyNum?t.curIndex=this.snakeArray[this.snakeArray.length-1].curIndex:t.curIndex=0,1==this.snakeArray.length){var e=this.node.position.normalize();t.setPosition(this.node.position.sub(e.mul(this.sectionLen)))}else{var o=this.snakeArray[this.snakeArray.length-1],n=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize();t.setPosition(o.position.sub(n.mul(this.sectionLen)))}this.node.parent.addChild(t),this.snakeArray.push(t),this.recordPoints(),this.changeZIndex()},rotateHead:function(t){var e=180*cc.v2(1,0).signAngle(t)/Math.PI;this.node.angle=e-90},moveSnake:function(){var t=this.dir.mul(this.speed);this.node.setPosition(this.node.position.add(t)),this.pointsArray.push(this.node.position),this.headPointsNum+=1;for(var e=1;e<this.snakeArray.length;e++){var o=Math.floor((this.pointsArray.length-this.headPointsNum)/(this.snakeArray.length-1)*(this.snakeArray.length-1-e));this.snakeArray[e].setPosition(this.pointsArray[o+this.snakeArray[e].curIndex]),this.snakeArray[e].curIndex+=1}},recordPoints:function(){for(var t=0,e=0;t<this.sectionLen;){t+=this.speed;var o=this.snakeArray[this.snakeArray.length-1],n=this.snakeArray[this.snakeArray.length-2].position.sub(o.position).normalize(),i=o.position.add(n.mul(t));this.pointsArray.splice(e,0,i),e+=1}},changeZIndex:function(){for(var t=0;t<this.snakeArray.length;t++)this.snakeArray[t].zIndex=cc.macro.MAX_ZINDEX-t},start:function(){},onCollisionEnter:function(t,e){if(1==t.tag){var o=this.getComponent(cc.Animation);return o.play("sdie"),o.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.snakem,!1),void game.gameOver(this.node)}2==t.tag&&this.getNewBody()},onFinished:function(){this.node.destroy()},update:function(t){this.dir&&(this.rotateHead(this.dir),this.moveSnake())}}),cc._RF.pop()},{}],start:[function(t,e,o){"use strict";cc._RF.push(e,"0b402jusB9CT4QAMhw89NJU","start"),cc.Class({extends:cc.Component,properties:{guang:cc.Node},onLoad:function(){},start:function(){cc.loader.downloader.loadSubpackage("animate",function(t){if(t)return console.error(t);console.log("load subpackage successfully.")})},clickBtn:function(t,e){if("start"==e)cc.director.loadScene("play");else if("love"==e){if(window.location.href="https://love-github-io.pages.dev/","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx40538bc553de45ac",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}else if("guang"==e){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})}},update:function(t){}}),cc._RF.pop()},{}]},{},["control","enemy","food","game","over","snake","start"]);